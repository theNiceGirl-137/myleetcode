//åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚ 
//
// ç¤ºä¾‹ 1: 
//
// è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2
//è¾“å‡º: 5
// 
//
// ç¤ºä¾‹ 2: 
//
// è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4
//è¾“å‡º: 4 
//
// è¯´æ˜: 
//
// ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¸” 1 â‰¤ k â‰¤ æ•°ç»„çš„é•¿åº¦ã€‚ 
// Related Topics å † åˆ†æ²»ç®—æ³• 
// ğŸ‘ 1048 ğŸ‘ 0


package leetcode
//leetcode submit region begin(Prohibit modification and deletion)
func findKthLargest(nums []int, k int) int {
	l, r := 0, len(nums)-1
	// æ•°ç»„å‡åºæ’åˆ—ï¼Œç¬¬ k å¤§çš„æ•°åœ¨å€’æ•°ç¬¬ k ä½
	target := len(nums)-k
	for l < r {
		// ç¬¬ mid å°çš„æ•°
		mid := quickSelection(nums, l, r)
		if mid == target {
			return nums[mid]
		// ç§»åŠ¨åŒºé—´ï¼Œå› ä¸ºæ¯”ç¬¬ mid å°çš„æ•°å·²ç»åˆ†å±…å·¦å³ä¸¤è¾¹ä½†è¿˜æœªæ’åº
		// æ‰€ä»¥ç§»åŠ¨åŒºé—´åˆ¤æ–­ä¸‹ä¸€ä¸ªæ•°å³å¯
		} else if mid < target {
			l = mid + 1
		} else {
			r = mid - 1
		}
	}
	return nums[l]
}

func quickSelection(nums []int, l, r int) int {
	// lï¼Œr åˆ†åˆ«æ˜¯å·¦å³è¾¹ç•Œ
	i, j := l+1, r
	for {
		// å°† i æŒ‡é’ˆå³ç§»ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå·¦è¾¹ç•Œçš„æ•°
		for i < r && nums[i] <= nums[l] {
			i++
		}
		// å°† j æŒ‡é’ˆå·¦ç§»ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºå·¦è¾¹ç•Œçš„æ•°
		for l < j && nums[j] >= nums[l] {
			j--
		}
		// ä¸¤æŒ‡é’ˆç›¸é‡ä¹‹åé€€å‡ºï¼Œè¯´æ˜å¤§äºå·¦è¾¹ç•Œçš„æ•°å’Œå°äºå·¦è¾¹ç•Œçš„æ•°å„å ä¸€è¾¹
		if i >= j {
			break
		}
		// äº¤æ¢ä¸¤ä¸ªæ•°çš„ä½ç½®
		nums[i], nums[j] = nums[j], nums[i]
	}
	// æ­¤æ—¶ j çš„ä½ç½®æ˜¯ç¬¬ä¸€ä¸ªå°äºå·¦è¾¹ç•Œçš„æ•°
	nums[l], nums[j] = nums[j], nums[l]
	// æ­¤æ—¶ j å‰çš„å…ƒç´ éƒ½æ¯” j å°ï¼Œj åçš„å…ƒç´ éƒ½æ¯” j å¤§ï¼Œj æ‰€åœ¨çš„ä½ç½®å°±æ˜¯ç¬¬ j å°çš„æ•°
	return j
}
//leetcode submit region end(Prohibit modification and deletion)
